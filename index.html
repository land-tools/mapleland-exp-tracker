<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>메이플랜드 경험치 측정기 - aprud.me</title>
    <link rel="stylesheet" href="css/styles.css?v=20251223091708">
    <!-- Tesseract.js CDN -->
    <script src="https://cdn.jsdelivr.net/npm/tesseract.js@5/dist/tesseract.min.js"></script>
    <!-- OpenCV.js for template matching -->
    <script async src="https://docs.opencv.org/4.x/opencv.js" onload="window.opencvReady = true;"></script>
    <!-- Google AdSense -->
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-7753546647181800"
         crossorigin="anonymous"></script>
</head>
<body>
    <!-- 모바일 접속 안내 -->
    <div class="mobile-notice" id="mobileNotice">
        <div class="mobile-notice-content">
            <span class="mobile-icon">🖥️</span>
            <h2>PC 전용 서비스입니다</h2>
            <p>화면 캡처 기능은 PC 브라우저에서만 지원됩니다.<br>PC로 접속해주세요!</p>
        </div>
    </div>

    <div class="page-wrapper">
        <!-- 왼쪽 광고 -->
        <aside class="ad-sidebar ad-left">
            <div class="ad-slot">
                <div class="ad-placeholder">
                    <span>광고 영역</span>
                    <small>160x600</small>
                </div>
            </div>
        </aside>

        <div class="container">
        <header class="header">
            <h1>🍁 메이플랜드 경험치 측정기 - aprud.me</h1>
            <nav class="header-nav">
                <a href="guide.html" class="nav-link">📖 가이드</a>
                <a href="exp-table.html" class="nav-link">📊 경험치표</a>
                <button id="btnHelp" class="btn-help" title="사용법">❓</button>
            </nav>
        </header>

        <div class="controls">
            <button id="btnSelectScreen" class="btn btn-primary">
                <span class="icon">🖥️</span> 화면 선택
            </button>
            <button id="btnAutoDetect" class="btn btn-accent" disabled>
                <span class="icon">🔍</span> 자동 감지
            </button>
            <button id="btnSelectExp" class="btn btn-secondary" disabled>
                <span class="icon">⚡</span> EXP 영역
            </button>
            <button id="btnSelectGold" class="btn btn-secondary" disabled>
                <span class="icon">💰</span> 메소 영역
            </button>
            <button id="btnClearAll" class="btn btn-secondary btn-small">
                <span class="icon">🗑️</span> 초기화
            </button>
        </div>

        <div class="preview-container">
            <div class="preview-wrapper">
                <canvas id="previewCanvas"></canvas>
                <div id="selectionOverlay" class="selection-overlay hidden">
                    <div id="selectionBox" class="selection-box"></div>
                </div>
                <div id="regionIndicators" class="region-indicators"></div>
            </div>
            <div class="preview-placeholder" id="previewPlaceholder">
                <p>화면을 선택하면 여기에 프리뷰가 표시됩니다</p>
            </div>
        </div>

        <div class="region-info region-coords">
            <div class="region-item">
                <span class="region-label">⚡ EXP:</span>
                <span id="expRegionInfo" class="region-value">미설정</span>
            </div>
            <div class="region-item">
                <span class="region-label">💰 메소:</span>
                <span id="goldRegionInfo" class="region-value">미설정</span>
            </div>
        </div>

        <div class="action-controls">
            <button id="btnStart" class="btn btn-success" disabled>
                <span class="icon">▶️</span> 시작
            </button>
            <button id="btnPause" class="btn btn-secondary" disabled>
                <span class="icon">⏸️</span> 일시정지
            </button>
            <button id="btnStop" class="btn btn-danger" disabled>
                <span class="icon">⏹️</span> 정지
            </button>
            <button id="btnPip" class="btn btn-info" disabled>
                <span class="icon">📺</span> PIP 열기
            </button>
            <div class="interval-selector">
                <span class="interval-label">갱신:</span>
                <select id="intervalSelect">
                    <option value="1000" selected>1초</option>
                    <option value="3000">3초</option>
                    <option value="5000">5초</option>
                    <option value="10000">10초</option>
                </select>
            </div>
        </div>

        <div class="status-bar">
            <div class="status-item">
                <span class="status-label">상태:</span>
                <span id="statusText" class="status-value">대기 중</span>
            </div>
            <div class="status-item">
                <span class="status-label">경과:</span>
                <span id="elapsedTime" class="status-value">00:00:00</span>
            </div>
            <div class="status-item">
                <span class="status-label">OCR:</span>
                <span id="ocrStatus" class="status-value">초기화 중...</span>
            </div>
        </div>

        <div class="results-panel" id="resultsPanel">
            <h3>분석 결과</h3>
            <div class="results-grid">
                <div class="result-card exp-card">
                    <h4>⚡ 경험치</h4>
                    <div class="result-row">
                        <span>현재:</span>
                        <span id="currentExp">-</span>
                    </div>
                    <div class="result-row">
                        <span>변화:</span>
                        <span id="expChange">-</span>
                    </div>
                    <div class="result-row">
                        <span>시간당:</span>
                        <span id="expPerHour">-</span>
                    </div>
                    <div class="result-row">
                        <span>레벨업:</span>
                        <span id="timeToLevel">-</span>
                    </div>
                </div>
                <div class="result-card gold-card">
                    <h4>💰 메소</h4>
                    <div class="result-row">
                        <span>현재:</span>
                        <span id="currentGold">-</span>
                    </div>
                    <div class="result-row">
                        <span>변화:</span>
                        <span id="goldChange">-</span>
                    </div>
                    <div class="result-row">
                        <span>시간당:</span>
                        <span id="goldPerHour">-</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- 사냥 기록 -->
        <div class="history-panel" id="historyPanel">
            <div class="history-header">
                <h3>📋 사냥 기록</h3>
                <button id="btnClearHistory" class="btn btn-danger btn-small">
                    <span class="icon">🗑️</span> 전체 삭제
                </button>
            </div>
            <div class="history-table-wrapper">
                <table class="history-table">
                    <thead>
                        <tr>
                            <th>날짜</th>
                            <th>시간</th>
                            <th>EXP</th>
                            <th>EXP/시간</th>
                            <th>메소</th>
                            <th>메소/시간</th>
                            <th>메모</th>
                            <th></th>
                        </tr>
                    </thead>
                    <tbody id="historyTableBody">
                        <!-- 기록이 여기에 동적으로 추가됨 -->
                    </tbody>
                </table>
            </div>
            <div class="history-empty" id="historyEmpty">
                <p>저장된 기록이 없습니다.</p>
            </div>
        </div>
    </div>

        <!-- 오른쪽 광고 -->
        <aside class="ad-sidebar ad-right">
            <div class="ad-slot">
                <div class="ad-placeholder">
                    <span>광고 영역</span>
                    <small>160x600</small>
                </div>
            </div>
        </aside>
    </div>


    <!-- Hidden elements for PIP -->
    <video id="sourceVideo" style="display: none;"></video>
    <canvas id="pipCanvas" style="display: none;"></canvas>
    <video id="pipVideo" style="display: none;"></video>

    <!-- 도움말 모달 -->
    <div id="helpModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>📖 사용 방법</h2>
                <button class="modal-close" id="btnCloseHelp">&times;</button>
            </div>
            <div class="modal-body">
                <div class="help-section">
                    <h3>🎮 기본 사용법</h3>
                    <ol>
                        <li><strong>[화면 선택]</strong> 클릭 → 게임 화면 선택</li>
                        <li>자동으로 EXP/메소 영역 감지됨</li>
                        <li>잘못 잡혔다면 <strong>[EXP 영역]</strong> / <strong>[메소 영역]</strong> 버튼 클릭 후 드래그로 수동 설정</li>
                        <li><strong>[분석 시작]</strong> 클릭</li>
                        <li><strong>[PIP 열기]</strong>로 작은 창에서 실시간 확인</li>
                    </ol>
                </div>
                <div class="help-section">
                    <h3>💡 팁</h3>
                    <ul>
                        <li>전체화면/창모드 전환 시 <strong>자동 재감지</strong>됨</li>
                        <li>메소는 <strong>인벤토리가 열려있어야</strong> 인식됨</li>
                        <li>PIP 창에서 ▶️/⏹️ 버튼으로 분석 제어 가능</li>
                        <li>사냥 기록에 <strong>메모</strong>를 남길 수 있음</li>
                    </ul>
                </div>
                <div class="help-section">
                    <h3>⚠️ 주의사항</h3>
                    <ul>
                        <li>Chrome/Edge 브라우저 권장</li>
                        <li>화면 공유 중에는 브라우저를 닫지 마세요</li>
                    </ul>
                </div>
            </div>
            <div class="modal-footer">
                <label class="checkbox-label">
                    <input type="checkbox" id="chkDontShowAgain"> 다시 보지 않기
                </label>
                <button class="btn btn-primary" id="btnCloseHelpOk">확인</button>
            </div>
        </div>
    </div>

    <!-- JavaScript Modules -->
    <script src="js/storage.js?v=20251223091708"></script>
    <script src="js/capture.js?v=20251223091708"></script>
    <script src="js/regionSelector.js?v=20251223091708"></script>
    <script src="js/ocr.js?v=20251223091708"></script>
    <script src="js/analyzer.js?v=20251223091708"></script>
    <script src="js/pip.js?v=20251223091708"></script>
    <script src="js/autoDetect.js?v=20251223091708"></script>
    <script src="js/app.js?v=20251223091708"></script>
</body>
</html>

